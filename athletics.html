<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2020 ë„ì¿„ ì˜¬ë¦¼í”½ í”½í† ê·¸ë¨ - Athletics</title>
    <link rel="stylesheet" href="style.css">
    
    <!-- WebGL ì…°ì´ë” ì •ì˜ -->
    <script id="vertex-shader" type="x-shader/x-vertex">
    attribute vec4 vPosition;
    attribute vec4 vColor;
    attribute vec3 vNormal;
    attribute vec2 vTexCoord;
    
    uniform mat4 uModelViewMatrix;
    uniform mat4 uProjectionMatrix;
    uniform mat3 uNormalMatrix;
    
    // ì¡°ëª… ê´€ë ¨ ìœ ë‹ˆí¼
    uniform vec3 uLightPosition;
    uniform vec3 uLightAmbient;
    uniform vec3 uLightDiffuse;
    uniform vec3 uLightSpecular;
    
    // ì¬ì§ˆ ê´€ë ¨ ìœ ë‹ˆí¼
    uniform vec3 uMaterialAmbient;
    uniform vec3 uMaterialDiffuse;
    uniform vec3 uMaterialSpecular;
    uniform float uMaterialShininess;
    
    varying vec4 fColor;
    varying vec3 fPosition;
    varying vec3 fNormal;
    varying vec3 fLightDirection;
    varying vec3 fViewDirection;
    varying vec2 fTexCoord;
    
    void main() {
        // ìœ„ì¹˜ ë³€í™˜
        vec4 worldPosition = uModelViewMatrix * vPosition;
        gl_Position = uProjectionMatrix * worldPosition;
        
        // í”„ë˜ê·¸ë¨¼íŠ¸ ì…°ì´ë”ë¡œ ì „ë‹¬í•  ë³€ìˆ˜ë“¤
        fPosition = worldPosition.xyz;
        fNormal = normalize(uNormalMatrix * vNormal);
        fLightDirection = normalize(uLightPosition - fPosition);
        fViewDirection = normalize(-fPosition);
        fTexCoord = vTexCoord;
        
        // ê¸°ë³¸ ìƒ‰ìƒë„ ì „ë‹¬ (ì¬ì§ˆ ì†ì„± ëŒ€ì‹  ì‚¬ìš©í•  ìˆ˜ ìˆìŒ)
        fColor = vColor;
    }
    </script>
    
    <script id="fragment-shader" type="x-shader/x-fragment">
    precision mediump float;
    
    // ì¡°ëª… ê´€ë ¨ ìœ ë‹ˆí¼
    uniform vec3 uLightAmbient;
    uniform vec3 uLightDiffuse;
    uniform vec3 uLightSpecular;
    
    // ì¬ì§ˆ ê´€ë ¨ ìœ ë‹ˆí¼
    uniform vec3 uMaterialAmbient;
    uniform vec3 uMaterialDiffuse;
    uniform vec3 uMaterialSpecular;
    uniform float uMaterialShininess;
    
    // í…ìŠ¤ì²˜ ìœ ë‹ˆí¼
    uniform sampler2D uTexture;
    uniform bool uUseTexture;
    
    varying vec4 fColor;
    varying vec3 fPosition;
    varying vec3 fNormal;
    varying vec3 fLightDirection;
    varying vec3 fViewDirection;
    varying vec2 fTexCoord;
    
    void main() {
        // ì •ê·œí™”ëœ ë²¡í„°ë“¤
        vec3 N = normalize(fNormal);
        vec3 L = normalize(fLightDirection);
        vec3 V = normalize(fViewDirection);
        vec3 H = normalize(L + V);
        
        // Ambient ì„±ë¶„
        vec3 ambient = uLightAmbient * uMaterialAmbient;
        
        // Diffuse ì„±ë¶„
        float NdotL = max(dot(N, L), 0.0);
        vec3 diffuse = uLightDiffuse * uMaterialDiffuse * NdotL;
        
        // Specular ì„±ë¶„ (Blinn-Phong)
        float NdotH = max(dot(N, H), 0.0);
        vec3 specular = uLightSpecular * uMaterialSpecular * pow(NdotH, uMaterialShininess);
        
        // ìµœì¢… ìƒ‰ìƒ ê³„ì‚°
        vec3 finalColor = ambient + diffuse + specular;
        
        // í…ìŠ¤ì²˜ê°€ ìˆì„ ê²½ìš° ì ìš©
        if (uUseTexture) {
            vec4 textureColor = texture2D(uTexture, fTexCoord);
            finalColor *= textureColor.rgb;
            finalColor *= fColor.rgb;
            gl_FragColor = vec4(finalColor, textureColor.a * fColor.a);
        } else {
            // ê¸°ë³¸ ìƒ‰ìƒê³¼ ë¸”ë Œë”© (ì„ íƒì )
            finalColor *= fColor.rgb;
            gl_FragColor = vec4(finalColor, fColor.a);
        }
    }
    </script>
    
    <!-- WebGL ìœ í‹¸ë¦¬í‹° ìŠ¤í¬ë¦½íŠ¸ -->
    <script type="text/javascript" src="Common/webgl-utils.js"></script>
    <script type="text/javascript" src="Common/initShaders.js"></script>
    <script type="text/javascript" src="Common/MV.js"></script>
    
    <!-- ëª¨ë“ˆí™”ëœ JavaScript íŒŒì¼ë“¤ -->
    <script type="text/javascript" src="js/camera.js"></script>
    <script type="text/javascript" src="js/blinn-phong-lighting.js"></script>
    <script type="text/javascript" src="js/model.js"></script>
    <script type="text/javascript" src="js/poseController.js"></script>
    <script type="text/javascript" src="js/poseStorage.js"></script>
    <script type="text/javascript" src="js/animation.js"></script>
    <script type="text/javascript" src="athletics.js"></script>
</head>
<body>
    <div class="container">
        <!-- ì™¼ìª½ íŒ¨ë„: ìº”ë²„ìŠ¤ -->
        <div class="left-panel">
            <h2>Athletics (ìœ¡ìƒ)</h2>
            <div class="canvas-container">
                <canvas id="gl-canvas" width="600" height="600">
                    ì´ ë¸Œë¼ìš°ì €ëŠ” HTML5 Canvasë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
                </canvas>
            </div>
            <div style="margin-top: 10px; font-size: 12px; color: #666; text-align: center;">
                <strong>ë“œë˜ê·¸ ì¡°ì‘ë²•:</strong><br>
                â€¢ ë§ˆìš°ìŠ¤ ë“œë˜ê·¸: X/Yì¶• íšŒì „<br>
                â€¢ Ctrl + ë“œë˜ê·¸: Zì¶• íšŒì „<br>
                â€¢ Alt + ë“œë˜ê·¸: Xì¶•ë§Œ íšŒì „<br>
                â€¢ Shift + ë“œë˜ê·¸: í¬ê¸° ì¡°ì ˆ<br>
                â€¢ ë§ˆìš°ìŠ¤ íœ : í¬ê¸° ì¡°ì ˆ
            </div>
        </div>
        
        <!-- ì˜¤ë¥¸ìª½ íŒ¨ë„: ì»¨íŠ¸ë¡¤ -->
        <div class="right-panel">
            <h2>ì»¨íŠ¸ë¡¤</h2>
            
            <!-- í¬ì¦ˆ ê¸°ë³¸ ì»¨íŠ¸ë¡¤ -->
            <div class="accordion-section">
                <div class="accordion-header" data-target="pose-control">
                    <span class="accordion-title">ğŸ“‹ í¬ì¦ˆ ì „í™˜</span>
                    <span class="accordion-arrow">â–¼</span>
                </div>
                <div class="accordion-content active" id="pose-control">
            <div class="controls">
                <button id="apply-running-pose">ë‹¬ë¦¬ê¸° í¬ì¦ˆ ì ìš©</button>
                <button id="reset-all-pose">ì „ì²´ ì´ˆê¸°í™”</button>
                    </div>
                </div>
            </div>
            
            <!-- ê´€ì ˆ ì„ íƒ ë° ì œì–´ -->
            <div class="accordion-section">
                <div class="accordion-header" data-target="joint-control">
                    <span class="accordion-title">ğŸ¦´ ê´€ì ˆ ì œì–´</span>
                    <span class="accordion-arrow">â–¼</span>
                </div>
                <div class="accordion-content active" id="joint-control">
                    <!-- ê´€ì ˆ ì„ íƒ -->
                    <div class="subsection-title">ê´€ì ˆ ì„ íƒ</div>
                    <div class="controls">
                        <select id="joint-selector">
                            <option value="">ê´€ì ˆì„ ì„ íƒí•˜ì„¸ìš”</option>
                            <option value="HEAD">ë¨¸ë¦¬/ëª©</option>
                            <option value="LEFT_UPPER_ARM">ì™¼ìª½ ì–´ê¹¨</option>
                            <option value="RIGHT_UPPER_ARM">ì˜¤ë¥¸ìª½ ì–´ê¹¨</option>
                            <option value="LEFT_LOWER_ARM">ì™¼ìª½ íŒ”ê¿ˆì¹˜</option>
                            <option value="RIGHT_LOWER_ARM">ì˜¤ë¥¸ìª½ íŒ”ê¿ˆì¹˜</option>
                            <option value="LEFT_HAND">ì™¼ìª½ ì†ëª©</option>
                            <option value="RIGHT_HAND">ì˜¤ë¥¸ìª½ ì†ëª©</option>
                            <option value="LEFT_UPPER_LEG">ì™¼ìª½ ì—‰ë©ì´</option>
                            <option value="RIGHT_UPPER_LEG">ì˜¤ë¥¸ìª½ ì—‰ë©ì´</option>
                            <option value="LEFT_LOWER_LEG">ì™¼ìª½ ë¬´ë¦</option>
                            <option value="RIGHT_LOWER_LEG">ì˜¤ë¥¸ìª½ ë¬´ë¦</option>
                            <option value="LEFT_FOOT">ì™¼ìª½ ë°œëª©</option>
                            <option value="RIGHT_FOOT">ì˜¤ë¥¸ìª½ ë°œëª©</option>
                        </select>
                    </div>
                    
                    <!-- ê´€ì ˆë³„ íšŒì „ ì»¨íŠ¸ë¡¤ -->
                    <div class="subsection-title">ê´€ì ˆ íšŒì „ (<span id="selected-joint-name">ê´€ì ˆì„ ì„ íƒí•˜ì„¸ìš”</span>)</div>
                    <div class="slider-controls" id="joint-rotation-controls" style="display: none;">
                        <div class="slider-container" id="joint-axis-x" style="display: none;">
                            <div class="slider-label">
                                <span id="joint-axis-x-label">íšŒì „ X</span>
                                <span id="joint-rotate-x-value">0Â°</span>
                            </div>
                            <input type="range" id="joint-rotate-x" min="-180" max="180" value="0">
                        </div>
                        
                        <div class="slider-container" id="joint-axis-y" style="display: none;">
                            <div class="slider-label">
                                <span id="joint-axis-y-label">íšŒì „ Y</span>
                                <span id="joint-rotate-y-value">0Â°</span>
                            </div>
                            <input type="range" id="joint-rotate-y" min="-180" max="180" value="0">
                        </div>
                        
                        <div class="slider-container" id="joint-axis-z" style="display: none;">
                            <div class="slider-label">
                                <span id="joint-axis-z-label">íšŒì „ Z</span>
                                <span id="joint-rotate-z-value">0Â°</span>
                            </div>
                            <input type="range" id="joint-rotate-z" min="-180" max="180" value="0">
                        </div>
                        
                        <div class="controls">
                            <button id="reset-joint-rotation">ê´€ì ˆ ì´ˆê¸°í™”</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- í¬ì¦ˆ ì €ì¥/ê´€ë¦¬ -->
            <div class="accordion-section">
                <div class="accordion-header" data-target="pose-management">
                    <span class="accordion-title">ğŸ’¾ í¬ì¦ˆ ê´€ë¦¬</span>
                    <span class="accordion-arrow">â–¼</span>
                </div>
                <div class="accordion-content" id="pose-management">
                    <div class="controls">
                        <div class="pose-save-container">
                            <input type="text" id="pose-name" placeholder="í¬ì¦ˆ ì´ë¦„ ì…ë ¥" maxlength="20">
                            <button id="save-pose">í¬ì¦ˆ ì €ì¥</button>
                        </div>
                        <div class="pose-list-container">
                            <select id="saved-poses">
                                <option value="">ì €ì¥ëœ í¬ì¦ˆ ì—†ìŒ</option>
                            </select>
                            <div class="pose-buttons">
                                <button id="load-pose" disabled>ë¶ˆëŸ¬ì˜¤ê¸°</button>
                                <button id="delete-pose" disabled>ì‚­ì œ</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ì• ë‹ˆë©”ì´ì…˜ -->
            <div class="accordion-section">
                <div class="accordion-header" data-target="animation-control">
                    <span class="accordion-title">ğŸ¬ ì• ë‹ˆë©”ì´ì…˜</span>
                    <span class="accordion-arrow">â–¼</span>
                </div>
                <div class="accordion-content" id="animation-control">
                    <div class="controls">
                        <div class="animation-controls">
                            <button id="add-to-animation" disabled>í‚¤í”„ë ˆì„ ì¶”ê°€</button>
                            <button id="clear-animation">ì• ë‹ˆë©”ì´ì…˜ í´ë¦¬ì–´</button>
                        </div>
                        <div class="animation-timeline">
                            <div class="timeline-label">íƒ€ì„ë¼ì¸ (<span id="keyframe-count">0</span>ê°œ í‚¤í”„ë ˆì„)</div>
                            <div id="timeline-container">
                                <div id="timeline-bar"></div>
                            </div>
                            <div style="font-size: 11px; color: #666; margin-top: 5px; text-align: center;">
                                <strong>í‚¤í”„ë ˆì„ í¸ì§‘:</strong> ì¢Œí´ë¦­-ì´ë™ | ìš°í´ë¦­-ì‚­ì œ | ë“œë˜ê·¸-ì‹œê°„ì¡°ì ˆ | <span style="color: #dc3545;">ğŸ ë í‚¤í”„ë ˆì„ ë“œë˜ê·¸-ì „ì²´ ê¸¸ì´ ì¡°ì ˆ</span>
                            </div>
                        </div>
                        <div class="animation-playback">
                            <button id="play-animation" disabled>ì¬ìƒ</button>
                            <button id="stop-animation" disabled>ì •ì§€</button>
                            <div class="slider-container">
                                <div class="slider-label">
                                    <span>ì¬ìƒ ì†ë„</span>
                                    <span id="animation-speed-value">1.0x</span>
                                </div>
                                <input type="range" id="animation-speed" min="0.1" max="2.0" value="1.0" step="0.1">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ë¸”ë¦°-í ì¡°ëª… -->
            <div class="accordion-section">
                <div class="accordion-header" data-target="lighting-control">
                    <span class="accordion-title">ğŸ’¡ ë¸”ë¦°-í ì¡°ëª…</span>
                    <span class="accordion-arrow">â–¼</span>
                </div>
                <div class="accordion-content active" id="lighting-control">
                    <!-- ì¡°ëª… ìœ„ì¹˜ -->
                    <div class="subsection-title">ì¡°ëª… ìœ„ì¹˜</div>
                    <div class="slider-controls">
                        <div class="slider-container">
                            <div class="slider-label">
                                <span>ì¡°ëª… X</span>
                                <span id="light-x-value">5.0</span>
                            </div>
                            <input type="range" id="light-x" min="-10" max="10" value="5" step="0.1">
                        </div>
                        
                        <div class="slider-container">
                            <div class="slider-label">
                                <span>ì¡°ëª… Y</span>
                                <span id="light-y-value">5.0</span>
                            </div>
                            <input type="range" id="light-y" min="-10" max="10" value="5" step="0.1">
                        </div>
                        
                        <div class="slider-container">
                            <div class="slider-label">
                                <span>ì¡°ëª… Z</span>
                                <span id="light-z-value">5.0</span>
                            </div>
                            <input type="range" id="light-z" min="-10" max="10" value="5" step="0.1">
                        </div>
                    </div>
                    
                    <!-- ì¡°ëª… ê°•ë„ -->
                    <div class="subsection-title">ì¡°ëª… ê°•ë„</div>
                    <div class="slider-controls">
                        <div class="slider-container">
                            <div class="slider-label">
                                <span>Ambient</span>
                                <span id="ambient-value">0.3</span>
                            </div>
                            <input type="range" id="ambient-intensity" min="0" max="1" value="0.3" step="0.01">
                        </div>
                        
                        <div class="slider-container">
                            <div class="slider-label">
                                <span>Diffuse</span>
                                <span id="diffuse-value">0.7</span>
                            </div>
                            <input type="range" id="diffuse-intensity" min="0" max="1" value="0.7" step="0.01">
                        </div>
                        
                        <div class="slider-container">
                            <div class="slider-label">
                                <span>Specular</span>
                                <span id="specular-value">0.8</span>
                            </div>
                            <input type="range" id="specular-intensity" min="0" max="1" value="0.8" step="0.01">
                        </div>
                    </div>
                    
                    <!-- ì¬ì§ˆ ì†ì„± -->
                    <div class="subsection-title">ì¬ì§ˆ ì†ì„±</div>
                    <div class="slider-controls">
                        <div class="slider-container">
                            <div class="slider-label">
                                <span>ì¬ì§ˆ Ambient</span>
                                <span id="material-ambient-value">0.4</span>
                            </div>
                            <input type="range" id="material-ambient" min="0" max="1" value="0.4" step="0.01">
                        </div>
                        
                        <div class="slider-container">
                            <div class="slider-label">
                                <span>ì¬ì§ˆ Diffuse</span>
                                <span id="material-diffuse-value">0.8</span>
                            </div>
                            <input type="range" id="material-diffuse" min="0" max="1" value="0.8" step="0.01">
                        </div>
                        
                        <div class="slider-container">
                            <div class="slider-label">
                                <span>ì¬ì§ˆ Specular</span>
                                <span id="material-specular-value">0.5</span>
                            </div>
                            <input type="range" id="material-specular" min="0" max="1" value="0.5" step="0.01">
                        </div>
                        
                        <div class="slider-container">
                            <div class="slider-label">
                                <span>ê´‘íƒë„ (Shininess)</span>
                                <span id="shininess-value">32</span>
                            </div>
                            <input type="range" id="shininess" min="1" max="128" value="32" step="1">
                        </div>
                    </div>
                    
                    <div class="controls">
                        <button id="reset-lighting">ì¡°ëª… ì´ˆê¸°í™”</button>
                    </div>
                </div>
            </div>

            <!-- ë·° ì¡°ì‘ -->
            <div class="accordion-section">
                <div class="accordion-header" data-target="view-control">
                    <span class="accordion-title">ğŸ“· ë·° ì¡°ì‘</span>
                    <span class="accordion-arrow">â–¼</span>
                </div>
                <div class="accordion-content" id="view-control">
            <div class="slider-controls">
                <div class="slider-container">
                    <div class="slider-label">
                        <span>íšŒì „ X</span>
                        <span id="rotate-x-value">0Â°</span>
                    </div>
                    <input type="range" id="rotate-x" min="-180" max="180" value="0">
                </div>
                
                <div class="slider-container">
                    <div class="slider-label">
                        <span>íšŒì „ Y</span>
                        <span id="rotate-y-value">0Â°</span>
                    </div>
                    <input type="range" id="rotate-y" min="-180" max="180" value="0">
                </div>
                
                <div class="slider-container">
                    <div class="slider-label">
                        <span>íšŒì „ Z</span>
                        <span id="rotate-z-value">0Â°</span>
                    </div>
                    <input type="range" id="rotate-z" min="-180" max="180" value="0">
                </div>
                
                <div class="slider-container">
                    <div class="slider-label">
                        <span>í¬ê¸°</span>
                        <span id="scale-value">1.0x</span>
                    </div>
                    <input type="range" id="scale" min="0.5" max="2" value="1" step="0.1">
                </div>
            </div>
            
            <div class="controls">
                        <button id="reset-button">ì „ì²´ ì´ˆê¸°í™”</button>
                    </div>
                </div>
            </div>
            
            <div id="debug-info" style="display: none;">
                ë””ë²„ê·¸ ì •ë³´ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.
            </div>
        </div>
    </div>
</body>
</html> 